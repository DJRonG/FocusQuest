<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusQuest Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <!-- Audio elements for ambient sounds -->
    <audio id="audio-rain" loop src="https://assets.mixkit.co/active_storage/sfx/2515/2515-preview.mp3"></audio>
    <audio id="audio-cafe" loop src="https://assets.mixkit.co/active_storage/sfx/1138/1138-preview.mp3"></audio>
    <audio id="audio-forest" loop src="https://assets.mixkit.co/active_storage/sfx/2478/2478-preview.mp3"></audio>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="logo">
                    <div class="logo-icon">üéØ</div>
                    <span>FocusQuest</span>
                </a>
            </div>
            
            <nav class="sidebar-nav">
                <button class="nav-item active" data-section="overview">
                    <span class="nav-icon">üìä</span>
                    <span>Overview</span>
                </button>
                <button class="nav-item" data-section="tasks">
                    <span class="nav-icon">‚úÖ</span>
                    <span>Tasks</span>
                </button>
                <button class="nav-item" data-section="quests">
                    <span class="nav-icon">üèÜ</span>
                    <span>Quests</span>
                </button>
                <button class="nav-item" data-section="focus">
                    <span class="nav-icon">üß†</span>
                    <span>Focus Mode</span>
                </button>
                <button class="nav-item" data-section="calendar">
                    <span class="nav-icon">üìÖ</span>
                    <span>Calendar</span>
                </button>
                <button class="nav-item" data-section="insights">
                    <span class="nav-icon">üí°</span>
                    <span>AI Insights</span>
                </button>
                <button class="nav-item" data-section="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </button>
            </nav>
            
            <div class="sidebar-footer">
                <div class="mode-toggle">
                    <button class="mode-btn active" data-mode="work">Work</button>
                    <button class="mode-btn" data-mode="personal">Personal</button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <button class="menu-toggle" id="menuToggle">‚ò∞</button>
                <div class="search-container">
                    <input type="text" placeholder="Search tasks, quests..." class="search-input" id="globalSearch">
                </div>
                <div class="top-bar-actions">
                    <button class="quick-add-btn" id="quickAddBtn">+ Add Task</button>
                    <div class="user-menu">
                        <div class="user-avatar" id="userAvatar">üë§</div>
                    </div>
                </div>
            </header>

            <!-- Overview Section -->
            <section class="content-section active" id="section-overview">
                <div class="section-header">
                    <h1>Good <span id="greeting-time">morning</span>, <span id="user-name">Focus Seeker</span></h1>
                    <p class="section-subtitle" id="date-display"></p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-completed">0</span>
                            <span class="stat-label">Tasks Completed Today</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-streak">0</span>
                            <span class="stat-label">Day Streak</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-focus">0h</span>
                            <span class="stat-label">Focus Time Today</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-progress">0%</span>
                            <span class="stat-label">Weekly Goal</span>
                        </div>
                    </div>
                </div>

                <!-- Daily Planner -->
                <div class="panel">
                    <div class="panel-header">
                        <h2>Today's Plan</h2>
                        <div class="time-blocks-legend">
                            <span class="legend-item"><span class="dot morning"></span>Morning</span>
                            <span class="legend-item"><span class="dot afternoon"></span>Afternoon</span>
                            <span class="legend-item"><span class="dot evening"></span>Evening</span>
                        </div>
                    </div>
                    <div class="time-blocks" id="timeBlocks">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions-grid">
                    <button class="quick-action" onclick="FocusQuest.startFocusSession()">
                        <span class="qa-icon">üß†</span>
                        <span>Start Focus Session</span>
                    </button>
                    <button class="quick-action" onclick="FocusQuest.showSection('tasks')">
                        <span class="qa-icon">üìù</span>
                        <span>Add New Task</span>
                    </button>
                    <button class="quick-action" onclick="FocusQuest.openAIChat()">
                        <span class="qa-icon">ü§ñ</span>
                        <span>Ask AI Assistant</span>
                    </button>
                    <button class="quick-action" onclick="FocusQuest.showSection('insights')">
                        <span class="qa-icon">üìä</span>
                        <span>View Analytics</span>
                    </button>
                </div>

                <!-- Daily Inspiration -->
                <div class="panel inspiration-panel">
                    <div class="inspiration-content">
                        <span class="inspiration-icon">‚ú®</span>
                        <blockquote id="daily-quote">"The secret of getting ahead is getting started."</blockquote>
                        <cite id="quote-author">‚Äî Mark Twain</cite>
                    </div>
                </div>
            </section>

            <!-- Tasks Section -->
            <section class="content-section" id="section-tasks">
                <div class="section-header">
                    <h1>Task Management</h1>
                    <div class="section-actions">
                        <select id="taskFilter" class="filter-select">
                            <option value="all">All Tasks</option>
                            <option value="todo">To Do</option>
                            <option value="inprogress">In Progress</option>
                            <option value="done">Completed</option>
                        </select>
                        <select id="priorityFilter" class="filter-select">
                            <option value="all">All Priorities</option>
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                </div>

                <!-- Add Task Form -->
                <div class="panel add-task-panel">
                    <form id="addTaskForm" class="add-task-form">
                        <input type="text" id="taskInput" placeholder="What needs to be done?" required>
                        <div class="task-options">
                            <select id="taskPriority">
                                <option value="medium">Medium Priority</option>
                                <option value="high">High Priority</option>
                                <option value="low">Low Priority</option>
                            </select>
                            <select id="taskTimeBlock">
                                <option value="">No Time Block</option>
                                <option value="morning">Morning</option>
                                <option value="afternoon">Afternoon</option>
                                <option value="evening">Evening</option>
                            </select>
                            <select id="taskQuest">
                                <option value="">No Quest</option>
                            </select>
                            <input type="date" id="taskDeadline" title="Deadline">
                        </div>
                        <div class="task-form-actions">
                            <button type="button" class="ai-suggest-btn" onclick="FocusQuest.getAIPrioritySuggestion()">
                                ü§ñ AI Suggest
                            </button>
                            <button type="submit" class="add-task-btn">Add Task</button>
                        </div>
                    </form>
                </div>

                <!-- Kanban Board -->
                <div class="kanban-board">
                    <div class="kanban-column" data-status="todo">
                        <div class="column-header">
                            <h3>üìã To Do</h3>
                            <span class="task-count" id="count-todo">0</span>
                        </div>
                        <div class="task-list" id="list-todo"></div>
                    </div>
                    <div class="kanban-column" data-status="inprogress">
                        <div class="column-header">
                            <h3>üîÑ In Progress</h3>
                            <span class="task-count" id="count-inprogress">0</span>
                        </div>
                        <div class="task-list" id="list-inprogress"></div>
                    </div>
                    <div class="kanban-column" data-status="done">
                        <div class="column-header">
                            <h3>‚úÖ Done</h3>
                            <span class="task-count" id="count-done">0</span>
                        </div>
                        <div class="task-list" id="list-done"></div>
                    </div>
                </div>
            </section>

            <!-- Quests Section -->
            <section class="content-section" id="section-quests">
                <div class="section-header">
                    <h1>Quests & Goals</h1>
                    <button class="btn-primary" onclick="FocusQuest.openAddQuestModal()">+ New Quest</button>
                </div>

                <div class="quests-grid" id="questsGrid">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- Focus Mode Section -->
            <section class="content-section" id="section-focus">
                <div class="section-header">
                    <h1>Focus Mode</h1>
                </div>

                <!-- Focus Timer -->
                <div class="focus-container">
                    <div class="timer-display">
                        <div class="timer-ring">
                            <svg viewBox="0 0 200 200">
                                <circle class="timer-bg" cx="100" cy="100" r="90"/>
                                <circle class="timer-progress" id="timerProgress" cx="100" cy="100" r="90"/>
                            </svg>
                            <div class="timer-text">
                                <span class="timer-minutes" id="timerMinutes">25</span>
                                <span class="timer-separator">:</span>
                                <span class="timer-seconds" id="timerSeconds">00</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="timer-controls">
                        <button class="timer-btn" onclick="FocusQuest.setTimer(15)">15m</button>
                        <button class="timer-btn active" onclick="FocusQuest.setTimer(25)">25m</button>
                        <button class="timer-btn" onclick="FocusQuest.setTimer(45)">45m</button>
                        <button class="timer-btn" onclick="FocusQuest.setTimer(60)">60m</button>
                    </div>
                    
                    <div class="focus-actions">
                        <button class="btn-large btn-primary" id="focusStartBtn" onclick="FocusQuest.toggleFocusTimer()">
                            Start Focus Session
                        </button>
                    </div>

                    <div class="focus-task-select">
                        <label>Focus on:</label>
                        <select id="focusTaskSelect">
                            <option value="">Select a task...</option>
                        </select>
                    </div>
                </div>

                <!-- Environment Controls -->
                <div class="panel">
                    <h3 class="panel-title">Environment Controls</h3>
                    
                    <div class="env-controls">
                        <div class="env-control">
                            <span class="env-label">Focus Lighting</span>
                            <button class="toggle-btn" id="lightingToggle" onclick="FocusQuest.toggleLighting()">
                                <span class="toggle-icon">üí°</span>
                                <span class="toggle-status">Off</span>
                            </button>
                        </div>
                        
                        <div class="env-control">
                            <span class="env-label">Ambient Sound</span>
                            <div class="sound-options">
                                <button class="sound-btn active" data-sound="none" onclick="FocusQuest.setAmbientSound('none')">üîá</button>
                                <button class="sound-btn" data-sound="rain" onclick="FocusQuest.setAmbientSound('rain')">üåßÔ∏è</button>
                                <button class="sound-btn" data-sound="cafe" onclick="FocusQuest.setAmbientSound('cafe')">‚òï</button>
                                <button class="sound-btn" data-sound="forest" onclick="FocusQuest.setAmbientSound('forest')">üå≤</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Scenes -->
                <div class="panel">
                    <h3 class="panel-title">Quick Scenes</h3>
                    <div class="scenes-grid">
                        <button class="scene-btn" onclick="FocusQuest.activateScene('deep-focus')">
                            <span class="scene-icon">üéØ</span>
                            <span class="scene-name">Deep Focus</span>
                        </button>
                        <button class="scene-btn" onclick="FocusQuest.activateScene('relax')">
                            <span class="scene-icon">üßò</span>
                            <span class="scene-name">Relax</span>
                        </button>
                        <button class="scene-btn" onclick="FocusQuest.activateScene('energize')">
                            <span class="scene-icon">‚ö°</span>
                            <span class="scene-name">Energize</span>
                        </button>
                        <button class="scene-btn" onclick="FocusQuest.activateScene('wind-down')">
                            <span class="scene-icon">üåô</span>
                            <span class="scene-name">Wind Down</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Calendar Section -->
            <section class="content-section" id="section-calendar">
                <div class="section-header">
                    <h1>Calendar</h1>
                    <button class="btn-secondary" onclick="FocusQuest.syncCalendar()">üîÑ Sync</button>
                </div>

                <div class="calendar-container">
                    <div class="calendar-sidebar">
                        <div class="mini-calendar" id="miniCalendar">
                            <!-- Mini calendar generated by JS -->
                        </div>
                        
                        <div class="calendar-connect">
                            <h4>Connect Calendar</h4>
                            <button class="connect-btn google" onclick="FocusQuest.connectCalendar('google')">
                                <span>üìÖ</span> Google Calendar
                            </button>
                            <button class="connect-btn outlook" onclick="FocusQuest.connectCalendar('outlook')">
                                <span>üìß</span> Outlook
                            </button>
                        </div>
                    </div>
                    
                    <div class="calendar-main">
                        <div class="day-schedule" id="daySchedule">
                            <!-- Day schedule generated by JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- AI Insights Section -->
            <section class="content-section" id="section-insights">
                <div class="section-header">
                    <h1>AI Insights & Analytics</h1>
                </div>

                <div class="insights-grid">
                    <!-- Productivity Chart -->
                    <div class="panel chart-panel">
                        <h3 class="panel-title">Weekly Productivity</h3>
                        <div class="chart-container" id="productivityChart">
                            <div class="bar-chart">
                                <div class="bar" style="--height: 60%" data-day="Mon"><span>Mon</span></div>
                                <div class="bar" style="--height: 80%" data-day="Tue"><span>Tue</span></div>
                                <div class="bar" style="--height: 45%" data-day="Wed"><span>Wed</span></div>
                                <div class="bar" style="--height: 90%" data-day="Thu"><span>Thu</span></div>
                                <div class="bar" style="--height: 70%" data-day="Fri"><span>Fri</span></div>
                                <div class="bar" style="--height: 30%" data-day="Sat"><span>Sat</span></div>
                                <div class="bar" style="--height: 20%" data-day="Sun"><span>Sun</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Recommendations -->
                    <div class="panel">
                        <h3 class="panel-title">ü§ñ AI Recommendations</h3>
                        <div class="ai-recommendations" id="aiRecommendations">
                            <div class="recommendation">
                                <span class="rec-icon">üí°</span>
                                <p>You're most productive in the morning. Consider scheduling high-priority tasks before noon.</p>
                            </div>
                            <div class="recommendation">
                                <span class="rec-icon">‚ö†Ô∏è</span>
                                <p>3 tasks are approaching their deadline. Review them in your task list.</p>
                            </div>
                            <div class="recommendation">
                                <span class="rec-icon">üéØ</span>
                                <p>Great progress on "Master Gemini API" quest! You're 60% complete.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Focus Patterns -->
                    <div class="panel">
                        <h3 class="panel-title">Focus Patterns</h3>
                        <div class="focus-patterns">
                            <div class="pattern-item">
                                <span class="pattern-label">Best Focus Time</span>
                                <span class="pattern-value">9:00 AM - 11:30 AM</span>
                            </div>
                            <div class="pattern-item">
                                <span class="pattern-label">Average Session</span>
                                <span class="pattern-value">32 minutes</span>
                            </div>
                            <div class="pattern-item">
                                <span class="pattern-label">Weekly Sessions</span>
                                <span class="pattern-value">14 sessions</span>
                            </div>
                        </div>
                    </div>

                    <!-- Task Completion Trends -->
                    <div class="panel">
                        <h3 class="panel-title">Completion Trends</h3>
                        <div class="trends-list" id="trendsList">
                            <div class="trend-item positive">
                                <span class="trend-arrow">‚Üë</span>
                                <span>Task completion up 15% this week</span>
                            </div>
                            <div class="trend-item neutral">
                                <span class="trend-arrow">‚Üí</span>
                                <span>Focus time consistent with last week</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section class="content-section" id="section-settings">
                <div class="section-header">
                    <h1>Settings</h1>
                </div>

                <div class="settings-container">
                    <!-- Profile Settings -->
                    <div class="panel">
                        <h3 class="panel-title">Profile</h3>
                        <div class="settings-group">
                            <div class="setting-item">
                                <label>Display Name</label>
                                <input type="text" id="settingName" placeholder="Your name" value="Focus Seeker">
                            </div>
                            <div class="setting-item">
                                <label>Email</label>
                                <input type="email" id="settingEmail" placeholder="your@email.com">
                            </div>
                            <button class="btn-primary" onclick="FocusQuest.saveProfile()">Save Profile</button>
                        </div>
                    </div>

                    <!-- AI Settings -->
                    <div class="panel">
                        <h3 class="panel-title">AI Configuration</h3>
                        <div class="settings-group">
                            <div class="setting-item">
                                <label>Gemini API Key (optional)</label>
                                <input type="password" id="settingApiKey" placeholder="Enter your API key for enhanced AI features">
                                <small>Get a key from <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a></small>
                            </div>
                            <div class="setting-item toggle-setting">
                                <label>AI Priority Suggestions</label>
                                <input type="checkbox" id="settingAISuggestions" checked>
                            </div>
                            <div class="setting-item toggle-setting">
                                <label>Task Completion Insights</label>
                                <input type="checkbox" id="settingInsights" checked>
                            </div>
                            <button class="btn-primary" onclick="FocusQuest.saveAISettings()">Save AI Settings</button>
                        </div>
                    </div>

                    <!-- Timer Settings -->
                    <div class="panel">
                        <h3 class="panel-title">Focus Timer</h3>
                        <div class="settings-group">
                            <div class="setting-item">
                                <label>Default Focus Duration (minutes)</label>
                                <input type="number" id="settingFocusDuration" value="25" min="5" max="120">
                            </div>
                            <div class="setting-item">
                                <label>Break Duration (minutes)</label>
                                <input type="number" id="settingBreakDuration" value="5" min="1" max="30">
                            </div>
                            <div class="setting-item toggle-setting">
                                <label>Sound Notifications</label>
                                <input type="checkbox" id="settingSoundNotify" checked>
                            </div>
                        </div>
                    </div>

                    <!-- Data Management -->
                    <div class="panel">
                        <h3 class="panel-title">Data Management</h3>
                        <div class="settings-group">
                            <button class="btn-secondary" onclick="FocusQuest.exportData()">üì§ Export Data</button>
                            <button class="btn-secondary" onclick="FocusQuest.importData()">üì• Import Data</button>
                            <button class="btn-danger" onclick="FocusQuest.clearAllData()">üóëÔ∏è Clear All Data</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- AI Chat Modal -->
    <div class="modal" id="aiChatModal">
        <div class="modal-content chat-modal">
            <div class="modal-header">
                <h3>ü§ñ AI Assistant</h3>
                <button class="modal-close" onclick="FocusQuest.closeAIChat()">√ó</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="chat-message assistant">
                    <p>Hi! I'm your FocusQuest AI assistant. I can help you manage tasks, suggest priorities, or answer questions about productivity. What would you like to do?</p>
                </div>
            </div>
            <form class="chat-input-form" id="chatForm">
                <input type="text" id="chatInput" placeholder="Ask me anything...">
                <button type="submit">Send</button>
            </form>
        </div>
    </div>

    <!-- Add Quest Modal -->
    <div class="modal" id="addQuestModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üèÜ Create New Quest</h3>
                <button class="modal-close" onclick="FocusQuest.closeAddQuestModal()">√ó</button>
            </div>
            <form id="addQuestForm">
                <div class="form-group">
                    <label>Quest Title</label>
                    <input type="text" id="questTitle" placeholder="e.g., Master a new skill" required>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="questDescription" placeholder="What do you want to achieve?" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Target Date (optional)</label>
                    <input type="date" id="questDeadline">
                </div>
                <button type="submit" class="btn-primary">Create Quest</button>
            </form>
        </div>
    </div>

    <!-- Task Detail Modal -->
    <div class="modal" id="taskDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Task Details</h3>
                <button class="modal-close" onclick="FocusQuest.closeTaskDetail()">√ó</button>
            </div>
            <div id="taskDetailContent">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <!-- Transition Screen -->
    <div class="transition-screen" id="transitionScreen">
        <div class="transition-content">
            <div class="transition-icon">‚ú®</div>
            <h2 id="transitionTitle">Task Complete!</h2>
            <p id="transitionMessage">Great work! Take a moment to breathe.</p>
            <div class="transition-insight" id="transitionInsight"></div>
            <div class="transition-next" id="transitionNext"></div>
            <button class="btn-primary" onclick="FocusQuest.closeTransition()">Continue</button>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="dashboard.js"></script>
</body>
</html>
